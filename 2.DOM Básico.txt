DOCUMENT OBJECT MODEL (DOM)

√â uma interface que representa documentos HTML e XML atrav√©s de objetos. Com ela √© poss√≠vel manipular a estrutura, estilo e conte√∫do destes documentos.

console.log(window);
// window √© o objeto global do browser
// possui diferentes m√©todos e propriedades

window.innerHeight; // retorna a altura do browser
----------------------------------------------------------
WINDOW E DOCUMENT

S√£o os objetos principais do DOM, boa parte da manipula√ß√£o √© feita atrav√©s dos seus m√©todos e propriedades.

window.alert('Isso √© um alerta');
alert('Isso √© um alerta'); // Funciona

document.querySelector('h1'); // Seleciona o primeiro h1
document.body; // Retorna o body
-----------------------------------
NODE

Toda tag html √© representada pelo objeto Element e por isso herda os seus m√©todos e propriedades. Element √© um tipo de objeto Node.

const titulo = document.querySelector('h1');

titulo.innerText; // retorna o texto;
titulo.classList; // retorna as classes;
titulo.id; // retorna o id;
titulo.offsetHeight; // retorna a altura do elemento;

titulo.addEventListener('click', callback);
// ativa a fun√ß√£o callback ao click no titulo
@@_________________________________________________@@

SELE√á√ÉO DE ELEMENTO.

ID

getElementById seleciona e retorna elementos do DOM

// Seleciona pelo ID
const animaisSection = document.getElementById('animais');
const contatoSection = document.getElementById('contato');

// Retorna null caso n√£o exista
const naoExiste = document.getElementById('teste');
-----------------------------------------------------
CLASSE E TAG

getElementsByClassName e getElementsByTagName selecionam e retornam uma lista de elementos do DOM. A lista retornada est√° ao vivo, significa que se elementos forem adicionados, ela ser√° automaticamente atualizada.

// Seleciona pela classe, retorna uma HTMLCollection
const gridSection = document.getElementsByClassName('grid-section');
const contato = document.getElementsByClassName('grid-section contato');

// Seleciona todas as UL's, retorna uma HTMLCollection
const ul = document.getElementsByTagName('ul');

// Retorna o primeiro elemento
console.log(gridSection[0]);
--------------------------------
SELETOR GERAL √öNICO

querySelector retorna o primeiro elemento que combinar com o seu seletor CSS.

const animais = document.querySelector('.animais');
const contato = document.querySelector('#contato');
const ultimoItem = document.querySelector('.animais-lista li:last-child');
const linkCSS = document.querySelector('[href^="https://"]');
const primeiroUl = document.querySelector('ul');

// Busca dentro do Ul apenas
const navItem = primeiroUl.querySelector('li');
-------------------------------------------------
SELETOR GERAL LISTA

querySelectorAll retorna todos os elementos compat√≠veis com o seletor CSS em uma NodeList

const gridSection = document.querySelectorAll('.grid-section');
const listas = document.querySelectorAll('ul');
const titulos = document.querySelectorAll('.titulo');
const fotosAnimais = document.querySelectorAll('.animais-lista img');

// Retorna o segundo elemento
console.log(gridSection[1]);
------------------------------
HTMLCOLLECTION VS NODELIST

A diferen√ßa est√° nos m√©todos e propriedades de ambas. Al√©m disso a NodeList retornada com querySelectorAll √© est√°tica.

const titulo = document.querySelector('.titulo');
const gridSectionHTML = document.getElementsByClassName('grid-section');
const gridSectionNode = document.querySelectorAll('.grid-section');

titulo.classList.add('grid-section');

console.log(gridSectionHTML); // 4 itens
console.log(gridSectionNode); // 3 itens
-------------------------------------------
ARRAY-LIKE

HTMLCollection e NodeList s√£o array-like, parecem uma array mas n√£o s√£o. O m√©todo de Array forEach() por exemplo, existe apenas em NodeList.

const gridSection = document.querySelectorAll('.grid-section');

gridSection.forEach(function(gridItem, index, array) {
  gridItem.classList.add('azul');
  console.log(index) // index do item na array
  console.log(array) // a array completa
});
COPIAR
√â poss√≠vel transformar array-like em uma Array real, utilizando o m√©todo
@@________________________________________________________________________@@


Classes e Atributos!!!!!!!

CLASSLIST
Retorna uma lista com as classes do elemento. Permite adicionar, remover e verificar se cont√©m.

const menu = document.querySelector('.menu');

menu.className; // string
menu.classList; // lista de classes
menu.classList.add('ativo');
menu.classList.add('ativo', 'mobile'); // duas classes
menu.classList.remove('ativo');
menu.classList.toggle('ativo'); // adiciona/remove a classe
menu.classList.contains('ativo'); // true ou false
menu.classList.replace('ativo', 'inativo');
-----------------------------------------------
ATTRIBUTES

Retorna uma array-like com os atributos do elemento.

const animais = document.querySelector('.animais');

animais.attributes; // retorna todos os atributos
animais.attributes[0]; // retorna o primeiro atributo
-------------------------------------------------------
READ ONLY VS WRITABLE

Existem propriedades que n√£o permitem a mudan√ßa de seus valores, essas s√£o considerados Read Only, ou seja, apenas leitura.

const animais = document.querySelector('.animais');

animais.className; // string com o nome das classes
animais.className = 'azul'; // substitui completamente a string
animais.className += ' vermelho'; // adiciona vermelho √† string

animais.attributes = 'class="ativo"'; // n√£o funciona, read-only

Lembre-se que podemos modificar o valor de uma propriedade objeto.propriedade = ''
@@__________________________________________________________________________________@@


forEach e Arrow Function!!!!!!!!!!!!!!!!!!!!

FOREACH

Constantemente vamos selecionar uma lista de itens do dom. A melhor forma para interagirmos com os mesmos √© utilizando o m√©todo forEach.

const imgs = document.querySelectorAll('img');

imgs.forEach(function(item){
  console.log(item);
});
-------------------------------------
PAR√ÇMETROS DO FOREACH

O primeiro par√¢metro √© o callback, ou seja, a fun√ß√£o que ser√° ativada a cada item. Esse fun√ß√£o pode receber tr√™s par√¢metros: valorAtual, index e array;

const imgs = document.querySelectorAll('img');

imgs.forEach(function(valorAtual, index, array){
  console.log(item); // o item atual no loop
  console.log(index); // o n√∫mero do index
  console.log(array); // a Array completa
});
--------------------------------------------
FOREACH E ARRAY

forEach √© um m√©todo de Array, alguns objetos array-like possuem este m√©todo. Caso n√£o possua, o ideal √© transform√°-los em uma array.

const titulos = document.getElementsByClassName('titulo');
const titulosArray = Array.from(titulos);

titulosArray.forEach(function(item){
  console.log(item);
});
-------------------------------------
ARROW FUNCTION

Sintaxe curta em rela√ß√£o a function expression. Basta remover a palavra chave function e adicionar a fat arrow => ap√≥s os argumentos.

const imgs = document.querySelectorAll('img');

imgs.forEach((item) => {
  console.log(item);
});
--------------------------
ARGUMENTOS E PAR√äNTESES

const imgs = document.querySelectorAll('img');

// argumento √∫nico n√£o precisa de par√™nteses
imgs.forEach(item => {
  console.log(item);
});

// multiplos argumentos precisam de par√™nteses
imgs.forEach((item, index) => {
  console.log(item, index);
});

// sem argumentos precisa dos par√™nteses, mesmo vazio
let i = 0;
imgs.forEach(() => {
  console.log(i++);
});
------------------------
RETURN

√â poss√≠vel omitir as chaves {} para uma fun√ß√£o que retorna uma linha.

const imgs = document.querySelectorAll('img');

imgs.forEach(item => 
  console.log(item)
);

imgs.forEach(item => console.log(item));
COPIAR
N√£o √© permitido fechar a linha com ;
@@____________________________________@@

Dimens√µes e Dist√¢ncias!!!!!!!!!!

HEIGHT E WIDTH

Estas s√£o propriedades e m√©todos dos objetos Element e HTMLElement, a maioria delas s√£o Read Only

const section = document.querySelector('.animais');

section.clientHeight; // height + padding
section.offsetHeight; // height + padding + border
section.scrollHeight; // height total, mesmo dentro de scroll

Mesma coisa para o Width, clientWidth ...
-------------------------------------------

OFFSETTOP E OFFSETLEFT

const section = document.querySelector('.animais');

// Dist√¢ncia entre o topo do elemento e o topo da p√°gina
section.offsetTop;

// Dist√¢ncia entre o canto esquerdo do elemento
// e o canto esquerdo da p√°gina
section.offsetLeft;
-------------------------
GETBOUNDINGCLIENTRECT()

M√©todo que retorna um objeto com valores de width, height, dist√¢ncias do elemento e mais.

const section = document.querySelector('.animais');

const rect = section.getBoundingClientRect();
rect.height; // height do elemento
rect.width; // width do elemento
rect.top; // dist√¢ncia entre o topo do elemento e o scroll
------------------------------------------------------------
WINDOW

window.innerWidth; // width do janela
window.outerWidth; // soma dev tools tamb√©m
window.innerHeight; // height do janela
window.outerHeight; // soma a barra de endere√ßo

window.pageYOffset; // dist√¢ncia total do scroll horizontal
window.pageXOffset; // dist√¢ncia total do scroll vertical

if(window.innerWidth < 600) {
  console.log('Tela menor que 600px');
}
------------------------------------------
MATCHMEDIA();
Utilize um media-querie como no CSS para verificar a largura do browser

const small = window.matchMedia('(max-width: 600px)');

if(small.matches) {
  console.log('Tela menor que 600px')
} else {
  console.log('Tela maior que 600px')
}
@@______________________________________@@

Eventos!!!!!!!!!!!!!!!

ADDEVENTLISTENER

Adiciona uma fun√ß√£o ao elemento, esta chamada de callback, que ser√° ativada assim que certo evento ocorrer neste elemento.

const img = document.querySelector('img');

// elemento.addEventListener(event, callback, options)
img.addEventListener('click', function() {
  console.log('Clicou');
})

O terceiro par√¢metro √© opcional.
------------------------------------
CALLBACK

√â boa pr√°tica separar a fun√ß√£o de callback do addEventListener, ou seja, declarar uma fun√ß√£o ao inv√©s de passar diretamente uma fun√ß√£o an√¥nima

const img = document.querySelector('img');
function callback() {
  console.log('Clicou');
}

img.addEventListener('click', callback); // üöÄ
img.addEventListener('click', callback()); // undefined
img.addEventListener('click', function() {
  console.log('Clicou');
})
img.addEventListener('click', () => {
  console.log('Clicou');
})
---------------------------------------
EVENT

O primeiro par√¢metro do callback √© referente ao evento que ocorreu.

const img = document.querySelector('img');

function callback(event) {
  console.log(event);
}

img.addEventListener('click', callback);

Geralmente utilizam e como nome do par√¢metro
-----------------------------------------------
PROPRIEDADES DO EVENT

const animaisLista = document.querySelector('.animais-lista');

function executarCallback(event) {
  const currentTarget = event.currentTarget; // this
  const target = event.target; // onde o clique ocorreu
  const type = event.type; // tipo de evento
  const path = event.path;
  console.log(currentTarget, target, type, path);
}

animaisLista.addEventListener('click', executarCallback);
----------------------------------------------------------
EVENT.PREVENTDEFAULT()

Previne o comportamento padr√£o do evento no browser. No caso de um link externo, por exemplo, ir√° previnir que o link seja ativado.

const linkExterno = document.querySelector('a[href^="http"]');

function clickNoLink(event) {
  event.preventDefault();
  console.log(event.currentTarget.href);
}

linkExterno.addEventListener('click', clickNoLink);
-------------------------------------------------------
THIS

A palavra chave this √© uma palavra especial de JavaScript, que pode fazer refer√™ncia a diferentes objetos dependendo do contexto. No caso de eventos, ela far√° refer√™ncia ao elemento em que addEventListener foi adicionado.

const img = document.querySelector('img');

function callback(event) {
  console.log(this); // retorna a imagem
  console.log(this.getAttribute('src'));
}

img.addEventListener('click', callback);
 
Geralmente igual ao event.currentTarget
------------------------------------------
DIFERENTES EVENTOS

Existem diversos eventos como click, scroll, resize, keydown, keyup, mouseenter e mais. Eventos podem ser adicionados a diferentes elementos, como o window e document tamb√©m.

const h1 = document.querySelector('h1');

function callback(event) {
  console.log(event.type, event);
}

h1.addEventListener('click', callback);
h1.addEventListener('mouseenter', callback);
window.addEventListener('scroll', callback);
window.addEventListener('resize', callback);
window.addEventListener('keydown', callback);
 
https://developer.mozilla.org/en-US/docs/Web/Events
-------------------------------------------------------
KEYBOARD

Voc√™ pode adicionar atalhos para facilitar a navega√ß√£o no seu site, atrav√©s de eventos do keyboard.

function handleKeyboard(event) {
  if(event.key === 'a')
    document.body.classList.toggle('azul');
  else if(event.key === 'v')
    document.body.classList.toggle('vermelho');
}

window.addEventListener('keydown', callback);
-----------------------------------------------
FOREACH E EVENTOS

O m√©todo addEventListener √© adicionado √† um √∫nico elemento, ent√£o √© necess√°rio um loop entre elementos de uma lista, para adicionarmos √† cada um deles.

const imgs = document.querySelectorAll('img');

function imgSrc(event) {
  const src = event.currentTarget.getAttribute('src');
  console.log(src);
}

imgs.forEach((img) => {
  img.addEventListener('click', imgSrc);
});
@@___________________________________________@@

Traversing e Manipula√ß√£o

OUTERHTML, INNERHTML E INNERTEXT
Propriedades que retornam uma string contendo o html ou texto. √â poss√≠vel atribuir um novo valor para as mesmas element.innerText = 'Novo Texto'.

const menu = document.querySelector('.menu');

menu.outerHTML; // todo o html do elemento
menu.innerHTML; // html interno
menu.innerText; // texto, sem tags

menu.innerText = '<p>Texto</p>'; // a tag vai como texto
menu.innerHTML = '<p>Texto</p>'; // a tag √© renderizada
---------------------------------------------------------
TRASVERSING

Como navegar pelo DOM, utilizando suas propriedades e m√©todos.

const lista = document.querySelector('.animais-lista');

lista.parentElement; // pai
lista.parentElement.parentElement; // pai do pai
lista.previousElementSibling; // elemento acima
lista.nextElementSibling; // elemento abaixo

lista.children; // HTMLCollection com os filhos
lista.children[0]; // primeiro filho
lista.children[--lista.children.length]; // √∫ltimo filho

lista.querySelectorAll('li'); // todas as LI's
lista.querySelector('li:last-child'); // √∫ltimo filho
----------------------------------------------------------
ELEMENT VS NODE

Element's represetam um elemento html, ou seja, uma tag. Node representa um n√≥, e pode ser um elemento (Element), texto, coment√°rio, quebra de linha e mais.

const lista = document.querySelector('.animais-lista');

lista.previousElementSibling; // elemento acima
lista.previousSibling; // node acima

lista.firstChild; // primeiro node child
lista.childNodes; // todos os node child

Geralmente estamos atr√°s de um elemento e n√£o de qualquer node em si.
-------------------------------------------------------------------------
MANIPULANDO ELEMENTOS

√â poss√≠vel mover elementos no dom com m√©todos de Node.

const lista = document.querySelector('.animais-lista');
const contato = document.querySelector('.contato');
const titulo = contato.querySelector('.titulo');

contato.appendChild(lista); // move lista para o final de contato
contato.insertBefore(lista, titulo); // insere a lista antes de titulo
contato.removeChild(titulo); // remove titulo de contato
contato.replaceChild(lista, titulo); // substitui titulo por lista
----------------------------------------------------------------------
NOVOS ELEMENTOS

Podemos criar novos elementos com o m√©todo createElement()

const animais = document.querySelector('.animais');

const novoH1 = document.createElement('h1');
novoH1.innerText = 'Novo T√≠tulo';
novoH1.classList.add('titulo');

animais.appendChild(novoH1);
-------------------------------
CLONAR ELEMENTOS

Todo elemento selecionado √© √∫nico. Para criarmos um novo elemento baseado no anterior, √© necess√°rio utilizar o m√©todo cloneNode()

const titulo = document.querySelector('h1');
const titulo2 = document.querySelector('h1');
const novoTitulo = titulo;
// titulo, titulo2 e novoTitulo s√£o iguais

const cloneTitulo = titulo.cloneNode(true);
const contato = document.querySelector('.contato');
contato.appendChild(cloneTitulo);
COPIAR
true sinaliza para incluir os filhos
@@_________________________________________@@
Navega√ß√£o por Tabs!!!!!!!!!!!!

ADICIONAR CLASSES PARA MANIPULA√á√ÉO

A ideia de navega√ß√£o por tabs, √© ter uma lista de itens que controla a visualiza√ß√£o de uma lista de conte√∫do. Cada item da lista possui um conte√∫do relacionado ao mesmo.

<!-- Primeiro, adicionar classes que ir√£o
facilitar a manipula√ß√£o dos elementos -->
<ul class="animais-lista js-tabmenu">
  ...
</ul>
<div class="animais-descricao js-tabcontent">
  ...
</div>
----------------------------------------------------
SELECIONAR OS ITENS

const tabMenu = document.querySelectorAll('.js-tabmenu li');
const tabContent = document.querySelectorAll('.js-tabmenu section');
--------------------------------------------------------------------------
FUN√á√ÉO CALLBACK

Recebe index como par√¢metro para ativar a tab. Sempre que ativar, remove a classe ativo de todos os outros elementos.


function activeTab(index) {
  tabContent.forEach((content) => {
    content.classList.remove('ativo');
  });
  tabContent[index].classList.add('ativo');
}
---------------------------------------------------
ADICIONAR O EVENTO

Neste caso precisamos passar antes a fu√ß√£o an√¥nima no callback, para podermos passar o index como argumento de activeTab

tabMenu.forEach((itemMenu, index) => {
  itemMenu.addEventListener('click', () => {
    activeTab(index);
  });
});
------------------------------------------------------
ASSIM QUE CARREGAR

Adicionar a classe ativo ao primeiro elemento e adicionar a classe js ao html. Assim identificamos se o JavaScript est√° habilitado ou n√£o.

<!-- No head do borwser -->
<script>document.documentElement.className += ' js';</script>

// Verificar se existe elemento em tabContent e tabMenu
if(tabContent.length && tabMenu.length) {
  tabContent[0].classList.add('ativo');
  ...
}
---------------------------------------------------
ANIMA√á√ÉO COM CSS

Anima√ß√£o simples com css, sai de display none para display block.

.js .js-tabcontent section {
  display: none;
}

.js-tabcontent section.ativo {
  display: block !important;
  animation: show .5s forwards;
}

@keyframes show {
  from {
    opacity: 0;
    transform: translate3d(-30px, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0px, 0, 0);
  }
}



















